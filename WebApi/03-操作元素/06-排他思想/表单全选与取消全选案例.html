<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    * {
        padding: 0;
        margin: 0;
    }
    
    .wrap {
        width: 300px;
        margin: 100px auto 0;
    }
    
    table {
        border-collapse: collapse;
        border-spacing: 0;
        border: 1px solid #c0c0c0;
        width: 300px;
    }
    
    th,
    td {
        border: 1px solid #d0d0d0;
        color: #404060;
        padding: 10px;
    }
    
    th {
        background-color: #09c;
        font: bold 16px "微软雅黑";
        color: #fff;
    }
    
    td {
        font: 14px "微软雅黑";
    }
    
    tbody tr {
        background-color: #f0f0f0;
    }
    
    tbody tr:hover {
        cursor: pointer;
        background-color: #fafafa;
    }
</style>

</head>

<body>
<div class="wrap">
    <table>
        <thead>
            <tr>
                <th>
                    <input type="checkbox" id="j_cbAll" />
                </th>
                <th>商品</th>
                <th>价钱</th>
            </tr>
        </thead>
        <tbody id="j_tb">
            <tr>
                <td>
                    <input type="checkbox" />
                </td>
                <td>iPhone8</td>
                <td>8000</td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" />
                </td>
                <td>iPad Pro</td>
                <td>5000</td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" />
                </td>
                <td>iPad Air</td>
                <td>2000</td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" />
                </td>
                <td>Apple Watch</td>
                <td>2000</td>
            </tr>

        </tbody>
    </table>
</div>

<script>
  //一.用上面的大按钮影响下面的小按钮
  //1.全选与取消全选做法  让下面复选框的ckecked属性跟随全选按钮即可
  var j_cbAll=document.getElementById('j_cbAll');
  var j_tbs=document.getElementById('j_tb').getElementsByTagName('input');
  //2.注册事件
  j_cbAll.onclick=function(){
    // this.checked;
    console.log(this.checked);//获取值，在复制
    for(var i=0;i<j_tbs.length;i++){
     j_tbs[i].checked=this.checked;
    }
  }

  //二.用下面的小按钮影响上面的大按钮
  //思路：给下面小按钮都绑定点击事件，每次点击，都要循环查看所有的复选框有没有选中
  //如果有一个没选上上面全选就不选中
  for(var i=0;i<j_tbs.length;i++){
    j_tbs[i].onclick=function(){
      //每次点击下面，都要检查是否选中
      //flag控制全选按钮
      var flag=true;
      for(var i=0;i<j_tbs.length;i++){
        if(!j_tbs[i].checked){
          flag=false;
          break;//只要有一个没选中，即可退出循环  这样可以提高执行效率
          // j_cbAll.checked=false;//没有用 只设置了有一个没选中情况
        }
       j_cbAll.checked=flag;
      } 
    }
  }
</script>
  
</body>
</html>